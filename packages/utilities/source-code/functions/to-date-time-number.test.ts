import { describe, expect, test } from "vitest";

import { toDateTimeNumber } from "./to-date-time-number";

describe(`${toDateTimeNumber.name}()`, function () {
  test.each([
    [[0], 0b0000n],
    [[1], 0b1_0000n],
    [[2025], 0b11111101001_0000n],
    [[9999], 0b10011100001111_0000n],
    [[99999], 0b11000011010011111_0000n],
    [[2025, 1], 0b11111101001_0001_0001n],
    [[2025, 12], 0b11111101001_1100_0001n],
    [[2025, 12, 1], 0b11111101001_1100_00001_0010n],
    [[2025, 12, 31], 0b11111101001_1100_11111_0010n],
    [[2025, 12, 31, 0], 0b11111101001_1100_11111_00000_0011n],
    [[2025, 12, 31, 23], 0b11111101001_1100_11111_10111_0011n],
    [[2025, 12, 31, 23, 0], 0b11111101001_1100_11111_10111_000000_0100n],
    [[2025, 12, 31, 23, 59], 0b11111101001_1100_11111_10111_111011_0100n],
    [[2025, 12, 31, 23, 59, 0], 0b11111101001_1100_11111_10111_111011_000000_0101n],
    [[2025, 12, 31, 23, 59, 59], 0b11111101001_1100_11111_10111_111011_111011_0101n],
    [[2025, 12, 31, 23, 59, 59, 0], 0b11111101001_1100_11111_10111_111011_111011_0000000000_0110n],
    [
      [2025, 12, 31, 23, 59, 59, 999],
      0b11111101001_1100_11111_10111_111011_111011_1111100111_0110n,
    ],
    [
      [2025, 12, 31, 23, 59, 59, 999, 0],
      0b11111101001_1100_11111_10111_111011_111011_1111100111_0000000000_0111n,
    ],
    [
      [2025, 12, 31, 23, 59, 59, 999, 999],
      0b11111101001_1100_11111_10111_111011_111011_1111100111_1111100111_0111n,
    ],
    [
      [2025, 12, 31, 23, 59, 59, 999, 999, 0],
      0b11111101001_1100_11111_10111_111011_111011_1111100111_1111100111_0000000000_1000n,
    ],
    [
      [2025, 12, 31, 23, 59, 59, 999, 999, 999],
      0b11111101001_1100_11111_10111_111011_111011_1111100111_1111100111_1111100111_1000n,
    ],
    [
      [-0, 1, 1, -0, -0, -0, -0, -0, -0],
      0b0_0001_00001_00000_000000_000000_0000000000_0000000000_0000000000_1000n,
    ],
    [
      [+0, 1, 1, +0, +0, +0, +0, +0, +0],
      0b0_0001_00001_00000_000000_000000_0000000000_0000000000_0000000000_1000n,
    ],
    [
      [2024, 12, 31, 23, 59, 59, 999, 999, 999],
      0b11111101000_1100_11111_10111_111011_111011_1111100111_1111100111_1111100111_1000n,
    ],
  ] as const)(
    `[%#] %o => %d`,
    function (
      [year, month, day, hour, minute, second, millisecond, microsecond, nanosecond],
      expected,
    ) {
      expect(
        toDateTimeNumber(
          year,
          month,
          day,
          hour,
          minute,
          second,
          millisecond,
          microsecond,
          nanosecond,
        ),
      ).toBe(expected);
    },
  );
});
